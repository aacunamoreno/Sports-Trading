# Session Log - January 30, 2026

## Issue Fixed: Period Bets Incorrect Amounts

### Problem
El recuadro de "NHL Period Bets" mostraba montos incorrectos:
- **Mostraba**: 27-10, +$40,617.19
- **Debía mostrar**: 35-16, -$42,204.9

### Root Cause
Las apuestas de tipo **Over 1.5 (o15)** y **Regulation Under 6.5 (reg_u65)** se mostraban en la tabla individual pero **NO se sumaban al summary total** porque faltaban en el loop de cálculo inicial en `scrape_first_period_bets_enano()`.

### Files Modified

#### 1. `backend/server.py`
- **Línea 19704-19711**: Agregado `o15` y `reg_u65` al summary inicial
- **Línea 19717-19721**: Actualizado cálculo de `total_bet` para incluir todas las líneas
- **Línea 19731**: Agregado `o15` a `bets_list`
- **Línea 19737**: Agregado `o15`, `1p_o15`, y `reg_u65` al loop de procesamiento

#### 2. `frontend/src/pages/Opportunities.jsx`
- **Línea 3186-3242**: Cambiado de `grid-cols-5` a `grid-cols-7`
- Agregadas cajas para **Over 1.5** y **Reg U6.5** en el modal summary

### Commit
```
0b726ba - Fix Period Bets summary not including O1.5 and Reg U6.5 bets
```

### Deployment
- Pushed to GitHub: `main` branch
- Railway auto-deploy triggered

---

## Project Structure Reference

```
Sports-Trading/
├── backend/
│   └── server.py          # FastAPI server (hosted on Railway)
├── frontend/
│   └── src/pages/
│       └── Opportunities.jsx  # Main page with Period Bets component
├── memory/                 # Project documentation
├── browser-extension/      # Chrome extension
└── db_backup/             # Database backups
```

## Key Endpoints for Period Bets

- `GET /api/nhl/first-period-bets` - Get all bets + summary
- `POST /api/nhl/first-period-bets/refresh` - Force refresh from plays888
- Data source: plays888.co (ENANO account - jac075)

## Period Bets Types Tracked

| Key | Description |
|-----|-------------|
| u15 | 1st Period Under 1.5 |
| u25 | 1st Period Under 2.5 |
| u35 | 1st Period Under 3.5 |
| u45 | 1st Period Under 4.5 |
| o15 | 1st Period Over 1.5 |
| reg_u65 | Regulation Under 6.5 |

---

## Pending / Notes

- El sistema hace backup automático de bets los domingos y lunes antes del mediodía (Arizona time)
- Los datos históricos se guardan en MongoDB collection `first_period_bets_history`
- La semana actual se guarda en `first_period_bets`
